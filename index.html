<!DOCTYPE html>
<html lang="en">

<head>
    <title>Asterix Dashboard</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO meta tags -->
    <meta name="description"
        content="Asterix Dashboard is a CRUD web application for managing products, including adding, editing, searching, and deleting items with images and descriptions.">
    <meta name="author" content="Sherif">
    <meta name="keywords"
        content="Asterix Dashboard, CRUD, product management, inventory, admin panel, web app, product catalog, add product, edit product, delete product, search product">
    <!-- favicon ico -->
    <link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <!-- font awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- custom style -->
    <link rel="stylesheet" href="./css/style.css">
    <!-- media style -->
    <link rel="stylesheet" href="./css/media.css">
</head>

<body class="bg-dark text-light">
    <header class="text-center py-4 animate__animated animate__fadeIn">
        <h1 class="display-6 fw-bold">Asterix Dashboard</h1>
        <p class="text-info">Manage your products easily: add, edit, or upload files with the click of a button</p>
        <a href="#" class="text-warning" data-bs-toggle="modal" data-bs-target="#usageModal">How to Use the Website</a>
        <i class="fas fa-rocket text-warning ms-1 cursor-pointer" data-bs-toggle="modal" data-bs-target="#usageModal"></i>
    </header>
    <main class="main">
        <!-- *********************** start form section  ***********************-->
        <section id="addProductSection" class="container mt-5 animate__animated animate__fadeIn">
            <!-- Mode Selection Buttons -->
            <div class="d-flex justify-content-center mb-4">
                <button id="addProductModeButton" class="btn btn-primary me-2 animate__animated animate__fadeInLeft">
                    <i class="fas fa-plus-circle me-2"></i>Add Product
                </button>
                <button id="uploadFilesModeButton" class="btn btn-secondary animate__animated animate__fadeInRight">
                    <i class="fas fa-upload me-2"></i>Upload Files
                </button>
            </div>

            <!-- Add Product Form -->
            <div id="addProductForm" class="product-form animate__animated animate__fadeIn">
                <div>
                    <label class="form-label" for="product-name">
                        <i class="fas fa-tag text-info me-2"></i>Product Name
                    </label>
                    <input type="text" class="form-control" minlength="3" maxlength="13" id="product-name"
                        placeholder="Enter product name, ex: Tomatoes or Tomatoes23" oninput="validName(this.value)"
                        required>
                </div>
                <div>
                    <label class="form-label" for="product-price">
                        <i class="fas fa-dollar-sign text-info me-2"></i>Product Price
                    </label>
                    <input type="number" class="form-control" id="product-price" step="0.01"
                        placeholder="Enter product price, ex: 99 or 99.99" min="0.01" max="999999.99"
                        oninput="validPrice(this.value)" required>
                </div>
                <div>
                    <label class="form-label" for="product-category">
                        <i class="fas fa-list text-info me-2"></i>Product Category
                    </label>
                    <input type="text" class="form-control" id="product-category" minlength="3" maxlength="10"
                        placeholder="Enter product category, ex: vegetables" oninput="validCategory(this.value)"
                        required>
                </div>
                <div>
                    <label class="form-label" for="product-image">
                        <i class="fas fa-image text-info me-2"></i>Product Image
                    </label>
                    <input type="file" accept="image/*" class="form-control" id="product-image"
                        onchange="validImageFile(this)">
                </div>
                <div>
                    <label class="form-label" for="product-description">
                        <i class="fas fa-align-left text-info me-2"></i>Product Description
                    </label>
                    <textarea name="description" id="product-description" class="form-control"
                        oninput="validDescription(this.value)" rows="4" required></textarea>
                </div>
                <button id="add-product-button" class="btn btn-primary w-100 animate__animated animate__fadeInUp" onclick="addProduct()">
                    <i class="fas fa-plus-circle me-2"></i>ADD PRODUCT
                </button>
                <div class="text-center loader" id="loader"></div>
            </div>

            <!-- Upload Files Form -->
            <div id="uploadFilesForm" class="d-none animate__animated animate__fadeIn">
                <div class="mb-4">
                    <label class="form-label" for='folderUpload'>
                        <i class="fas fa-folder-open text-info me-2"></i>Image Folder
                    </label>
                    <div class="instructions text-light">Image names must match product numbers (e.g., 1.jpg, 2.png).</div>
                    <div class="upload-area" id="folderUploadArea">
                        <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                        <div class="upload-text">Click to select folder or drag it here</div>
                    </div>
                    <input type="file" id="folderUpload" webkitdirectory directory multiple class="hidden" accept="image/*">
                    <div class="file-list max-3 mt-3" id="fileList"></div>
                </div>
                <div class="mb-5 position-relative">
                    <label class="form-label" for="excelUpload">
                        <i class="fas fa-file-excel text-info me-2"></i>Excel File
                    </label>
                    <div class="instructions text-light">Excel must have columns: N, Name, Price, Category, Description.</div>
                    <input type="file" class="form-control" id="excelUpload" accept=".xlsx,.xls"
                        onchange="validExcelFile(this)">
                    <div class="file-list mt-2" id="excelFileName"></div>
                </div>
                <button id="upload-files-button" class="btn btn-success w-100 animate__animated animate__fadeInUp" onclick="uploadBatch()">
                    <i class="fas fa-upload me-2"></i>UPLOAD FILES
                </button>
                <div class="progress mt-3 d-none" id="progressContainer">
                    <div class="progress-bar" id="progressBar" role="progressbar" aria-valuenow="0" aria-valuemin="0"
                        aria-valuemax="100"></div>
                </div>
                <div class="text-center loader mt-3" id="uploadLoader"></div>
                <div class="alert alert-info d-none mt-3 animate__animated animate__fadeIn" id="logBox"></div>
            </div>
        </section>
        <!-- *********************** end form section  ***********************-->

        <!-- *********************** start search section  ***********************-->
        <section class="container my-5 animate__animated animate__fadeIn">
            <label for="search-input" class="form-label">
                <i class="fas fa-search text-info me-2"></i>Search
            </label>
            <input type="search" class="form-control" id="search-input" placeholder="Search for products..."
                oninput="searchProduct(this.value)">
        </section>
        <!-- *********************** end search section  ***********************-->

        <!-- *********************** start table section  ***********************-->
        <section class="container-lg container-fluid mt-5 animate__animated animate__fadeIn">
            <div class="table-responsive-custom">
                <table class="table table-dark table-striped table-bordered mb-0">
                    <thead>
                        <tr>
                            <th scope="col">N</th>
                            <th scope="col">Image</th>
                            <th scope="col">Name</th>
                            <th scope="col">Price</th>
                            <th scope="col">Category</th>
                            <th scope="col">Description</th>
                            <th scope="col">Created At</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="product-list">
                        <!-- Product items will be added here dynamically -->
                    </tbody>
                </table>
            </div>
        </section>
        <!-- *********************** end table section  ***********************-->

        <!-- Usage Modal -->
        <div class="modal fade" id="usageModal" tabindex="-1" aria-labelledby="usageModalLabel">
            <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content bg-dark text-light">
                    <div class="modal-header">
                        <h5 class="modal-title" id="usageModalLabel">
                            <i class="fas fa-rocket text-warning me-2"></i>How to Use Asterix Dashboard
                        </h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p class="text-info">Welcome to the Asterix Dashboard! Follow these steps to manage your products effectively:</p>
                        <ul class="list-unstyled">
                            <li class="mb-3 animate__animated animate__fadeInLeft animate-delay-1">
                                <i class="fas fa-plus-circle text-warning me-2"></i>
                                <strong>Add Product:</strong> Use the "Add Product" form to enter product details (name,
                                price, category, image, description) and click "Add Product".
                            </li>
                            <li class="mb-3 animate__animated animate__fadeInLeft animate-delay-2">
                                <i class="fas fa-upload text-warning me-2"></i>
                                <strong>Upload Files:</strong> Switch to "Upload Files" mode to upload an Excel file and
                                a folder of images. The Excel file must have 5 columns: <strong>N</strong>,
                                <strong>Name</strong>, <strong>Price</strong>, <strong>Category</strong>, and
                                <strong>Description</strong>. Image names must match the <strong>N</strong> column
                                (e.g., 1.jpg, 2.png) and be ordered accordingly to serve as the product ID.
                            </li>
                            <li class="mb-3 animate__animated animate__fadeInLeft animate-delay-3">
                                <i class="fas fa-search text-warning me-2"></i>
                                <strong>Search Products:</strong> Use the search bar to find products by name.
                            </li>
                            <li class="mb-3 animate__animated animate__fadeInLeft animate-delay-4">
                                <i class="fas fa-edit text-warning me-2"></i>
                                <strong>Edit/Delete Products:</strong> In the product table, click "Update" to edit or
                                "Delete" to remove a product.
                            </li>
                        </ul>
                        <p class="text-info">For a detailed walkthrough, watch the video below:</p>
                        <div class="ratio ratio-16x9 mt-3 position-relative">
                            <video controls class="rounded shadow-lg">
                                <source src="./vid/usage.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary animate__animated animate__fadeInUp" data-bs-dismiss="modal">
                            <i class="fas fa-times me-2"></i>Close
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content bg-dark text-light">
                    <div class="modal-header">
                        <h5 class="modal-title" id="confirmDeleteModalLabel">
                            <i class="fas fa-exclamation-triangle text-danger me-2"></i>Confirm Product Deletion
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p class="text-info">Are you sure you want to delete the following product?</p>
                        <p><strong>Product Number:</strong> <span id="deleteProductNumber" class="text-warning"></span></p>
                        <p><strong>Product Name:</strong> <span id="deleteProductName" class="text-warning"></span></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary animate__animated animate__fadeInLeft" data-bs-dismiss="modal">
                            <i class="fas fa-times me-2"></i>Cancel
                        </button>
                        <button type="button" class="btn btn-danger animate__animated animate__fadeInRight" id="confirmDeleteButton">
                            <i class="fas fa-trash-alt me-2"></i>Confirm Delete
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="animate__animated animate__fadeIn">
        <p>All rights reserved © 2025 Asterix Dashboard</p>
    </footer>
    <!-- SheetJS CDN for Excel file processing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <!-- bootstrap CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
    <!-- firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
    <!-- main script -->
    <script src="./js/main.js"></script>
</body>

</html>